<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.18.0/matter.min.js"
        integrity="sha512-5T245ZTH0m0RfONiFm2NF0zcYcmAuNzcGyPSQ18j8Bs5Pbfhp5HP1hosrR8XRt5M3kSRqzjNMYpm2+it/AUX/g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/pathseg@1.2.1/pathseg.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/poly-decomp@0.3.0/build/decomp.min.js"></script>
    <link rel="stylesheet" href="../assets/style/style.css">
    <title>포트폴리오</title>
</head>

<body>
    <div class="loading"></div>
    <header id="header" role="banner">
        <div class="header__title">
            <h1>frontend developer</h1>
            <div class="header__sub">
                <span>코드 한 줄에 담긴 열정,</span> <br>
                <span>사용자와 소통하는 감각적인 인터페이스를 개발합니다</span>
            </div>
        </div>
        <div id="matter-container">



            <svg width="66" height="56" viewBox="0 0 66 56" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path class="matter-path"
                    d="M33 1.32112L44.7765 30.1229L44.8023 30.1859L44.844 30.2398L63.8988 54.8394L33.0675 50.6373L33 50.6281L32.9325 50.6373L2.10118 54.8394L21.156 30.2398L21.1977 30.1859L21.2235 30.1229L33 1.32112Z"
                    fill="#D9D9D9" stroke="black" />
            </svg>

            <svg width="95" height="93" viewBox="0 0 95 93" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path class="matter-path"
                    d="M14.2629 4.1869L45.0296 22.5003L72.8932 0.0150773L64.9836 34.935L94.9786 54.4866L59.3235 57.755L49.9978 92.3237L35.8714 59.4237L0.112803 61.2368L27.0373 37.6351L14.2629 4.1869Z"
                    fill="#D9D9D9" />

                <path class="matter-path" d="M10 10 H 90 V 90 H 10 L 10 10" stroke="none" />
            </svg>



            <svg width="74" height="74" viewBox="0 0 74 74" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path class="matter-path"
                    d="M37 0L46.9934 27.0066L74 37L46.9934 46.9934L37 74L27.0066 46.9934L0 37L27.0066 27.0066L37 0Z"
                    fill="#D9D9D9" />
                <path class="matter-path"
                    d="M37 0L46.9934 27.0066L74 37L46.9934 46.9934L37 74L27.0066 46.9934L0 37L27.0066 27.0066L37 0Z"
                    fill="#D9D9D9" />
                <path class="matter-path"
                    d="M37 0L46.9934 27.0066L74 37L46.9934 46.9934L37 74L27.0066 46.9934L0 37L27.0066 27.0066L37 0Z"
                    fill="#D9D9D9" />
                <path class="matter-path"
                    d="M37 0L46.9934 27.0066L74 37L46.9934 46.9934L37 74L27.0066 46.9934L0 37L27.0066 27.0066L37 0Z"
                    fill="#D9D9D9" />
                <path class="matter-path"
                    d="M37 0L46.9934 27.0066L74 37L46.9934 46.9934L37 74L27.0066 46.9934L0 37L27.0066 27.0066L37 0Z"
                    fill="#D9D9D9" />
            </svg>


        </div>
        <div class=" header__bottom">
            <span>scroll to explore</span>
        </div>
    </header>

    <main id="main">
        <section id="section1" class="intro-slide">
            <div class="rage-intro">
                <div class="intro-number">
                    <img src="../assets/img/num01-1.svg" alt="num">
                </div>
                <div class="intro-number outline">
                    <img src="../assets/img/num01.svg" alt="outline">
                </div>
            </div>
            <div class="text">
                <div class="left">
                    <h2>where to begin?</h2>
                </div>
                <div class="right">
                    <p>No need to state the obvious. 2020 was a crazy year. Between pandemics, elections, civic unrest,
                        devastating forest fires, murder hornets, and not being able to shake hands with anyone, there’s
                        been a lot to process.</p>
                    <p>But through it all, a few things remained constant. Email. The death of big retail. Fedoras still
                        not being fashionable. Debates like “Should designers code?” and “Is a taco a sandwich?”</p>
                    <p>It was a year to reflect on the little things. Things that seem annoying or pointless suddenly
                        seem slightly less annoying and (maybe) less pointless. We recognize the little things, and
                        cherish them for what they are on our little corner of the internet.</p>
                    <p>At Milkshake, we kept on trucking. Making things on the internet for bold businesses that are
                        focused on their future. This is a small peek into our year. A year like many experienced,
                        except we wrapped it in loud colors and huge typography.</p>
                </div>
            </div>
        </section>
        <section id="section2">

        </section>
    </main>
    <footer id="footer"></footer>
    <script>
        const THICCNESS = 60;
        const SVG_PATH_SELECTOR = [".matter-path"];
        const SVG_WIDTH_IN_PX = 100;
        const SVG_WIDTH_AS_PERCENT_OF_CONTAINER_WIDTH = 0.2;

        const matterContainer = document.querySelector("#matter-container");

        // module aliases
        var Engine = Matter.Engine,
            Render = Matter.Render,
            Runner = Matter.Runner,
            Bodies = Matter.Bodies,
            Composite = Matter.Composite,
            Body = Matter.Body,
            Svg = Matter.Svg,
            Vector = Matter.Vector,
            Vertices = Matter.Vertices;

        // create an engine
        var engine = Engine.create();

        // create a renderer
        var render = Render.create({
            element: matterContainer,
            engine: engine,
            options: {
                width: matterContainer.clientWidth,
                height: matterContainer.clientHeight,
                background: "transparent",
                wireframes: false,
                showAngleIndicator: false,
                showBounds: false
            }
        });

        var ground = Bodies.rectangle(
            matterContainer.clientWidth / 2,
            matterContainer.clientHeight + THICCNESS / 2,
            matterContainer.clientWidth,
            THICCNESS,
            {
                isStatic: true,
                render: { strokeStyle: 'transparent' }
            }
        );

        let leftWall = Bodies.rectangle(
            0 - THICCNESS / 2,
            matterContainer.clientHeight / 2,
            THICCNESS,
            matterContainer.clientHeight,
            {
                isStatic: true,
                render: { strokeStyle: 'transparent' }
            }
        );

        let rightWall = Bodies.rectangle(
            matterContainer.clientWidth + THICCNESS / 2,
            matterContainer.clientHeight / 2,
            THICCNESS,
            matterContainer.clientHeight,
            {
                isStatic: true,
                render: { strokeStyle: 'transparent' }
            }
        );

        // add all of the bodies to the world
        Composite.add(engine.world, [ground, leftWall, rightWall]);

        let mouse = Matter.Mouse.create(render.canvas);
        let mouseConstraint = Matter.MouseConstraint.create(engine, {
            mouse: mouse,
            constraint: {
                stiffness: 0.2,
                render: {
                    visible: false
                }
            }
        });

        Composite.add(engine.world, mouseConstraint);

        // allow scroll through the canvas
        mouseConstraint.mouse.element.removeEventListener(
            "mousewheel",
            mouseConstraint.mouse.mousewheel
        );
        mouseConstraint.mouse.element.removeEventListener(
            "DOMMouseScroll",
            mouseConstraint.mouse.mousewheel
        );

        // run the renderer
        Render.run(render);

        // create runner
        var runner = Runner.create();

        // run the engine
        Runner.run(runner, engine);
        console.log(Composite.allBodies(engine.world));

        // 물체를 랜덤하게 떨어뜨리는 함수
        function createSvgBodiesRandomly() {
            const paths = document.querySelectorAll(SVG_PATH_SELECTOR);
            paths.forEach((path, index) => {
                const delay = Math.random() * 7000; // 0초에서 5초 사이의 무작위 시간 간격

                setTimeout(() => {
                    let vertices = Svg.pathToVertices(path);
                    let scaleFactor = (matterContainer.clientWidth * SVG_WIDTH_AS_PERCENT_OF_CONTAINER_WIDTH) / SVG_WIDTH_IN_PX;
                    vertices = Vertices.scale(vertices, scaleFactor, scaleFactor);
                    let svgBody = Bodies.fromVertices(
                        matterContainer.clientWidth * Math.random(), // 무작위 x 위치
                        matterContainer.clientHeight * Math.random() / 4, // 무작위 y 위치 (상단 1/4 범위 내)
                        [vertices],
                        {
                            friction: 0.3,
                            frictionAir: 0.00001,
                            restitution: 0.8,
                            render: {
                                strokeStyle: '#000',
                                lineWidth: 3
                            }
                        }
                    );
                    Composite.add(engine.world, svgBody);
                }, delay);
            });
        }

        function scaleBodies() {
            const allBodies = Composite.allBodies(engine.world);

            allBodies.forEach((body) => {
                if (body.isStatic === true) return;
                const { min, max } = body.bounds;
                const bodyWidth = max.x - min.x;
                let scaleFactor = (matterContainer.clientWidth * SVG_WIDTH_AS_PERCENT_OF_CONTAINER_WIDTH) / bodyWidth;

                Body.scale(body, scaleFactor, scaleFactor);
            });
        }

        function handleResize(matterContainer) {
            render.canvas.width = matterContainer.clientWidth;
            render.canvas.height = matterContainer.clientHeight;

            Body.setPosition(
                ground,
                Vector.create(matterContainer.clientWidth / 2, matterContainer.clientHeight + THICCNESS / 2)
            );

            Body.setPosition(
                rightWall,
                Vector.create(matterContainer.clientWidth + THICCNESS / 2, matterContainer.clientHeight / 2)
            );

            scaleBodies();
        }

        window.addEventListener("resize", () => handleResize(matterContainer));

        // 물체를 랜덤하게 떨어뜨리기 시작
        createSvgBodiesRandomly();
    </script>

    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollToPlugin.min.js"></script>
    <script>
        gsap.registerPlugin(ScrollTrigger);

        gsap.utils.toArray(".rage-intro").forEach((panel, i) => {
            ScrollTrigger.create({
                trigger: panel,
                start: "top top",
                end: "+=1000",
                pin: true,
                scrub: 0.5,
                markers: true,
                pinSpacing: false,
                onEnter: () => {
                    gsap.to(panel.querySelector('.outline'), {
                        backgroundColor: "var(--bgColor)", // 원하는 배경색으로 변경
                    });
                },
                onLeaveBack: () => {
                    gsap.to(panel.querySelector('.outline'), {
                        backgroundColor: "transparent", // 원래 상태로 복원
                    });
                }
            });
        });
    </script>

</body>

</html>